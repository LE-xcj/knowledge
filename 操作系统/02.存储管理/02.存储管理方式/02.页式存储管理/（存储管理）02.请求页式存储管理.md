因为程序的局部性原理，所以程序运行的信息并不是全部加载到内存中，而是加载必要的信息。

这样其他不必要的信息就存放到虚拟存储中，直到程序运行时需要，那么就会请求相关的页并加载到内存中，这便是请求页式存储管理。

不过请求页式存储管理面临两个问题：

**1、当程序所需的页不在内存中，程序怎么处理这种缺页的情况？**

答：程序会被中断，然后到虚拟存储中读取所缺少的页并加载到内存中。

**2、从虚拟存储读取页并加载到内存时，发现内存不够，那怎么办？**

答：根据页面置换算法将满足条件的页置换，腾出足够的内存空间，然后加载请求的页。

程序从缺页到请求页的具体过程如下图：

![](https://mmbiz.qpic.cn/mmbiz_png/BWLbK9PgqK2fUOy3ibNq9Dd09gGXY1yeZzVQLq23ZEOZ7V4kLmjIYDfuq7DiaWsLKRFHqmYVqw43AcB6vaVTsIbA/0?wx_fmt=png)

**3、那么常见的页面置换算法有哪些？**

答：有很多，但使用最广泛的是 LRU 置换算法。

LRU：Least Recently Used，最近最久未使用。顾名思义，就是将最近很久都未被使用的页面淘汰。

LRU 的核心：用一张置换表来记录已经分配的块号。程序在运行的时候，会通过页号找到对应的块号，如果块号在置换表找到（表示：已经加载到内存中），那么就将这个块号排列到置换表的第一行，表示这个块号是最新被调用。

如果块号在置换表找不到，那么就表示程序缺页，那么就需要判断内存空间是否足够。如果足够，那么就分配相应存储块加载信息，并将块号插入到置换表的首行；如果不足，那么就删除置换表的尾行（最近最久未使用），置换成调入页对应的块号，并将信息加载到对应的存储块中。

![](https://mmbiz.qpic.cn/mmbiz_png/BWLbK9PgqK2fUOy3ibNq9Dd09gGXY1yeZvlGO8pbHic8jfvykNzP3XmxoZMDT3IBWcibwhMx4GozAmTVqDOU6NNqw/0?wx_fmt=png)


